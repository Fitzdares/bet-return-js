function combinations(collection,size){var len=collection.length;if(size>len)return[];if(!size)return[[]];if(size===len)return[collection];return collection.reduce(function(acc,val,i){var res=combinations(collection.slice(i+1),size-1).map(function(comb){return[val].concat(comb)});return acc.concat(res)},[])}var commonjsGlobal=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}var fraction=createCommonjsModule(function(module,exports){(function(root){var MAX_CYCLE_LEN=2e3;var P={s:1,n:0,d:1};function createError(name){var errorConstructor=function(){var temp=Error.apply(this,arguments);temp.name=this.name=name;this.stack=temp.stack;this.message=temp.message};var IntermediateInheritor=function(){};IntermediateInheritor.prototype=Error.prototype;errorConstructor.prototype=new IntermediateInheritor;return errorConstructor}var DivisionByZero=Fraction["DivisionByZero"]=createError("DivisionByZero");var InvalidParameter=Fraction["InvalidParameter"]=createError("InvalidParameter");function assign(n,s){if(isNaN(n=parseInt(n,10))){throwInvalidParam()}return n*s}function throwInvalidParam(){throw new InvalidParameter}var parse=function(p1,p2){var n=0,d=1,s=1;var v=0,w=0,x=0,y=1,z=1;var A=0,B=1;var C=1,D=1;var N=1e7;var M;if(p1===undefined||p1===null){}else if(p2!==undefined){n=p1;d=p2;s=n*d}else switch(typeof p1){case"object":{if("d"in p1&&"n"in p1){n=p1["n"];d=p1["d"];if("s"in p1)n*=p1["s"]}else if(0 in p1){n=p1[0];if(1 in p1)d=p1[1]}else{throwInvalidParam()}s=n*d;break}case"number":{if(p1<0){s=p1;p1=-p1}if(p1%1===0){n=p1}else if(p1>0){if(p1>=1){z=Math.pow(10,Math.floor(1+Math.log(p1)/Math.LN10));p1/=z}while(B<=N&&D<=N){M=(A+C)/(B+D);if(p1===M){if(B+D<=N){n=A+C;d=B+D}else if(D>B){n=C;d=D}else{n=A;d=B}break}else{if(p1>M){A+=C;B+=D}else{C+=A;D+=B}if(B>N){n=C;d=D}else{n=A;d=B}}}n*=z}else if(isNaN(p1)||isNaN(p2)){d=n=NaN}break}case"string":{B=p1.match(/\d+|./g);if(B===null)throwInvalidParam();if(B[A]==="-"){s=-1;A++}else if(B[A]==="+"){A++}if(B.length===A+1){w=assign(B[A++],s)}else if(B[A+1]==="."||B[A]==="."){if(B[A]!=="."){v=assign(B[A++],s)}A++;if(A+1===B.length||B[A+1]==="("&&B[A+3]===")"||B[A+1]==="'"&&B[A+3]==="'"){w=assign(B[A],s);y=Math.pow(10,B[A].length);A++}if(B[A]==="("&&B[A+2]===")"||B[A]==="'"&&B[A+2]==="'"){x=assign(B[A+1],s);z=Math.pow(10,B[A+1].length)-1;A+=3}}else if(B[A+1]==="/"||B[A+1]===":"){w=assign(B[A],s);y=assign(B[A+2],1);A+=3}else if(B[A+3]==="/"&&B[A+1]===" "){v=assign(B[A],s);w=assign(B[A+2],s);y=assign(B[A+4],1);A+=5}if(B.length<=A){d=y*z;s=n=x+d*v+z*w;break}}default:throwInvalidParam()}if(d===0){throw new DivisionByZero}P["s"]=s<0?-1:1;P["n"]=Math.abs(n);P["d"]=Math.abs(d)};var modpow=function(b,e,m){for(var r=1;e>0;b=b*b%m,e>>=1){if(e&1){r=r*b%m}}return r};var cycleLen=function(n,d){for(;d%2===0;d/=2){}for(;d%5===0;d/=5){}if(d===1)return 0;var rem=10%d;for(var t=1;rem!==1;t++){rem=rem*10%d;if(t>MAX_CYCLE_LEN)return 0}return t};var cycleStart=function(n,d,len){var rem1=1;var rem2=modpow(10,len,d);for(var t=0;t<300;t++){if(rem1===rem2)return t;rem1=rem1*10%d;rem2=rem2*10%d}return 0};var gcd=function(a,b){if(!a)return b;if(!b)return a;while(1){a%=b;if(!a)return b;b%=a;if(!b)return a}};function Fraction(a,b){if(!(this instanceof Fraction)){return new Fraction(a,b)}parse(a,b);if(Fraction["REDUCE"]){a=gcd(P["d"],P["n"])}else{a=1}this["s"]=P["s"];this["n"]=P["n"]/a;this["d"]=P["d"]/a}Fraction["REDUCE"]=1;Fraction.prototype={s:1,n:0,d:1,abs:function(){return new Fraction(this["n"],this["d"])},neg:function(){return new Fraction(-this["s"]*this["n"],this["d"])},add:function(a,b){parse(a,b);return new Fraction(this["s"]*this["n"]*P["d"]+P["s"]*this["d"]*P["n"],this["d"]*P["d"])},sub:function(a,b){parse(a,b);return new Fraction(this["s"]*this["n"]*P["d"]-P["s"]*this["d"]*P["n"],this["d"]*P["d"])},mul:function(a,b){parse(a,b);return new Fraction(this["s"]*P["s"]*this["n"]*P["n"],this["d"]*P["d"])},div:function(a,b){parse(a,b);return new Fraction(this["s"]*P["s"]*this["n"]*P["d"],this["d"]*P["n"])},clone:function(){return new Fraction(this)},mod:function(a,b){if(isNaN(this["n"])||isNaN(this["d"])){return new Fraction(NaN)}if(a===undefined){return new Fraction(this["s"]*this["n"]%this["d"],1)}parse(a,b);if(0===P["n"]&&0===this["d"]){Fraction(0,0)}return new Fraction(this["s"]*P["d"]*this["n"]%(P["n"]*this["d"]),P["d"]*this["d"])},gcd:function(a,b){parse(a,b);return new Fraction(gcd(P["n"],this["n"]),P["d"]*this["d"]/gcd(P["d"],this["d"]))},lcm:function(a,b){parse(a,b);if(P["n"]===0&&this["n"]===0){return new Fraction}return new Fraction(P["n"]*this["n"]/gcd(P["n"],this["n"]),gcd(P["d"],this["d"]))},ceil:function(places){places=Math.pow(10,places||0);if(isNaN(this["n"])||isNaN(this["d"])){return new Fraction(NaN)}return new Fraction(Math.ceil(places*this["s"]*this["n"]/this["d"]),places)},floor:function(places){places=Math.pow(10,places||0);if(isNaN(this["n"])||isNaN(this["d"])){return new Fraction(NaN)}return new Fraction(Math.floor(places*this["s"]*this["n"]/this["d"]),places)},round:function(places){places=Math.pow(10,places||0);if(isNaN(this["n"])||isNaN(this["d"])){return new Fraction(NaN)}return new Fraction(Math.round(places*this["s"]*this["n"]/this["d"]),places)},inverse:function(){return new Fraction(this["s"]*this["d"],this["n"])},pow:function(m){if(m<0){return new Fraction(Math.pow(this["s"]*this["d"],-m),Math.pow(this["n"],-m))}else{return new Fraction(Math.pow(this["s"]*this["n"],m),Math.pow(this["d"],m))}},equals:function(a,b){parse(a,b);return this["s"]*this["n"]*P["d"]===P["s"]*P["n"]*this["d"]},compare:function(a,b){parse(a,b);var t=this["s"]*this["n"]*P["d"]-P["s"]*P["n"]*this["d"];return(0<t)-(t<0)},divisible:function(a,b){parse(a,b);return!(!(P["n"]*this["d"])||this["n"]*P["d"]%(P["n"]*this["d"]))},valueOf:function(){return this["s"]*this["n"]/this["d"]},toFraction:function(excludeWhole){var whole,str="";var n=this["n"];var d=this["d"];if(this["s"]<0){str+="-"}if(d===1){str+=n}else{if(excludeWhole&&(whole=Math.floor(n/d))>0){str+=whole;str+=" ";n%=d}str+=n;str+="/";str+=d}return str},toLatex:function(excludeWhole){var whole,str="";var n=this["n"];var d=this["d"];if(this["s"]<0){str+="-"}if(d===1){str+=n}else{if(excludeWhole&&(whole=Math.floor(n/d))>0){str+=whole;n%=d}str+="\\frac{";str+=n;str+="}{";str+=d;str+="}"}return str},toContinued:function(){var t;var a=this["n"];var b=this["d"];var res=[];do{res.push(Math.floor(a/b));t=a%b;a=b;b=t}while(a!==1);return res},toString:function(){var g;var N=this["n"];var D=this["d"];if(isNaN(N)||isNaN(D)){return"NaN"}if(!Fraction["REDUCE"]){g=gcd(N,D);N/=g;D/=g}var dec=15;var cycLen=cycleLen(N,D);var cycOff=cycleStart(N,D,cycLen);var str=this["s"]===-1?"-":"";str+=N/D|0;N%=D;N*=10;if(N)str+=".";if(cycLen){for(var i=cycOff;i--;){str+=N/D|0;N%=D;N*=10}str+="(";for(var i=cycLen;i--;){str+=N/D|0;N%=D;N*=10}str+=")"}else{for(var i=dec;N&&i--;){str+=N/D|0;N%=D;N*=10}}return str}};if(typeof undefined==="function"&&undefined["amd"]){undefined([],function(){return Fraction})}else{module["exports"]=Fraction}})(commonjsGlobal)});var fractionConversion={toDecimal:function toDecimal(value){return new fraction(value).valueOf()},toFractional:function toFractional(value){var fraction$$1=new fraction(value);var numerator=fraction$$1.n;var denominator=fraction$$1.d;return numerator+"/"+denominator}};var oddsConversion={toDecimal:function toDecimal(_ref){var decimal=_ref.decimal,fractional=_ref.fractional;if(decimal){return decimal}return 1+fractionConversion.toDecimal(fractional)},toFractional:function toFractional(_ref2){var decimal=_ref2.decimal,fractional=_ref2.fractional;if(fractional){return fractional}return fractionConversion.toFractional(decimal-1)}};function bet(stake,odds){return stake*(odds-1)+stake}function single(_ref){var stake=_ref.stake,odds=_ref.odds,terms=_ref.terms,_ref$ew=_ref.ew,ew=_ref$ew===undefined?false:_ref$ew,_ref$placeStake=_ref.placeStake,placeStake=_ref$placeStake===undefined?0:_ref$placeStake;var decimalTerms=fractionConversion.toDecimal(terms);var decimalOdds=oddsConversion.toDecimal(odds);var newPlaceStake=ew&&placeStake===0?stake:placeStake;var placeReturn=ew?bet(newPlaceStake,(decimalOdds-1)*decimalTerms+1):0;var winReturn=bet(stake,decimalOdds);return{win:winReturn,place:placeReturn,total:winReturn+placeReturn}}function calculateAccumulator(selections,stake,ew){var idx=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var place=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var sel=selections[idx];var res=single({stake:stake,ew:ew,odds:sel.odds,terms:sel.terms,placeStake:place});if(idx+1===selections.length){return res.total}return calculateAccumulator(selections,res.win,ew,idx+1,res.place||0)}function accumulator(_ref2){var selections=_ref2.selections,stake=_ref2.stake,ew=_ref2.ew,idx=_ref2.idx,place=_ref2.place;return calculateAccumulator(selections,stake,ew,idx,place)}function calculateMultiple(selections,stake){var ew=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var fullCover=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var count=selections.length;var start=fullCover?1:2;var allCombos=[];for(var i=start;i<=count;i+=1){allCombos=allCombos.concat(combinations(selections,i))}var totalReturn=allCombos.reduce(function(acc,selection){return acc+calculateAccumulator(selection,stake,ew)},0);return totalReturn}function multiple(_ref3){var selections=_ref3.selections,stake=_ref3.stake,ew=_ref3.ew,fullCover=_ref3.fullCover;return calculateMultiple(selections,stake,ew,fullCover)}function effectiveOdds(selections){var decimalOdds=selections.reduce(function(acc,selection){return acc*oddsConversion.toDecimal(selection.odds)},1);var fractionalOdds=oddsConversion.toFractional({decimal:decimalOdds});return{decimal:decimalOdds,fractional:fractionalOdds}}export{single,accumulator,multiple,effectiveOdds};